import{$ as i,o as N,c as G,w as l,a as e,a7 as H,aa as $,a9 as P,ac as ee,e as J,V as c,ad as w,ab as m,ae as y,aj as le,a5 as t,f as g,ak as q,cm as I,O as ae,a0 as te,ar as L,cV as Q,at as se,au as oe,P as ne,a8 as ue,a6 as x,r as ie,k as re,S as de,dL as ce,cZ as me,dr as ve,dq as pe,dl as B,dn as F}from"./index.a1270b37.js";import{r as h,e as fe}from"./validators.650e3200.js";import{a as _e,b as R,V as M}from"./VCard.64685768.js";import{V as Ve}from"./VForm.d61b2f69.js";import{u as he}from"./useUserListStore.05a34d9d.js";import{V as ge}from"./VTable.4626573f.js";import{V as Z}from"./VCheckbox.f7e0499a.js";import{V as xe}from"./VPagination.f6eef3e1.js";const be=t("span",null,"Add User",-1),we=g(" Submit "),ye=g(" Cancel "),Ue={__name:"AddNewUserDrawer",props:{isDrawerOpen:{type:Boolean,required:!0}},emits:["update:isDrawerOpen","userData"],setup(j,{emit:U}){const A=j,S=i(!1),p=i(),b=i(""),_=i(""),d=i(""),f=i(""),k=i(""),v=i(""),C=i(),z=i(),E=i(),T=()=>{U("update:isDrawerOpen",!1),q(()=>{var V,s;(V=p.value)==null||V.reset(),(s=p.value)==null||s.resetValidation()})},O=()=>{var V;(V=p.value)==null||V.validate().then(({valid:s})=>{s&&(U("userData",{id:0,fullName:b.value,company:f.value,role:C.value,username:_.value,country:k.value,contact:v.value,email:d.value,currentPlan:z.value,status:E.value,avatar:""}),U("update:isDrawerOpen",!1),q(()=>{var n,r;(n=p.value)==null||n.reset(),(r=p.value)==null||r.resetValidation()}))})};return(V,s)=>(N(),G(le,{temporary:"",width:400,location:"end","model-value":A.isDrawerOpen,"onUpdate:modelValue":s[10]||(s[10]=n=>V.$emit("update:isDrawerOpen",n))},{default:l(()=>[e(M,{flat:""},{default:l(()=>[e(_e,{class:"d-flex align-center bg-var-theme-background py-3"},{default:l(()=>[be,e(H),e($,{variant:"text",size:"x-small",color:"default",icon:"",onClick:T},{default:l(()=>[e(P,{size:"20",icon:"mdi-close"})]),_:1})]),_:1}),e(R,{class:"pt-5"},{default:l(()=>[e(Ve,{ref_key:"refForm",ref:p,modelValue:S.value,"onUpdate:modelValue":s[9]||(s[9]=n=>S.value=n),onSubmit:ee(O,["prevent"])},{default:l(()=>[e(J,null,{default:l(()=>[e(c,{cols:"12"},{default:l(()=>[e(w,{modelValue:b.value,"onUpdate:modelValue":s[0]||(s[0]=n=>b.value=n),rules:[m(h)],label:"Full Name"},null,8,["modelValue","rules"])]),_:1}),e(c,{cols:"12"},{default:l(()=>[e(w,{modelValue:_.value,"onUpdate:modelValue":s[1]||(s[1]=n=>_.value=n),rules:[m(h)],label:"Username"},null,8,["modelValue","rules"])]),_:1}),e(c,{cols:"12"},{default:l(()=>[e(w,{modelValue:d.value,"onUpdate:modelValue":s[2]||(s[2]=n=>d.value=n),rules:[m(h),m(fe)],label:"Email"},null,8,["modelValue","rules"])]),_:1}),e(c,{cols:"12"},{default:l(()=>[e(w,{modelValue:f.value,"onUpdate:modelValue":s[3]||(s[3]=n=>f.value=n),rules:[m(h)],label:"Company"},null,8,["modelValue","rules"])]),_:1}),e(c,{cols:"12"},{default:l(()=>[e(w,{modelValue:k.value,"onUpdate:modelValue":s[4]||(s[4]=n=>k.value=n),rules:[m(h)],label:"Country"},null,8,["modelValue","rules"])]),_:1}),e(c,{cols:"12"},{default:l(()=>[e(w,{modelValue:v.value,"onUpdate:modelValue":s[5]||(s[5]=n=>v.value=n),type:"number",rules:[m(h)],label:"Contact"},null,8,["modelValue","rules"])]),_:1}),e(c,{cols:"12"},{default:l(()=>[e(y,{modelValue:C.value,"onUpdate:modelValue":s[6]||(s[6]=n=>C.value=n),label:"Select Role",rules:[m(h)],items:["Admin","Author","Editor","Maintainer","Subscriber"]},null,8,["modelValue","rules"])]),_:1}),e(c,{cols:"12"},{default:l(()=>[e(y,{modelValue:z.value,"onUpdate:modelValue":s[7]||(s[7]=n=>z.value=n),label:"Select Plan",rules:[m(h)],items:["Basic","Company","Enterprise","Team"]},null,8,["modelValue","rules"])]),_:1}),e(c,{cols:"12"},{default:l(()=>[e(y,{modelValue:E.value,"onUpdate:modelValue":s[8]||(s[8]=n=>E.value=n),label:"Select Status",rules:[m(h)],items:[{title:"Active",value:"active"},{title:"Inactive",value:"inactive"},{title:"Pending",value:"pending"}]},null,8,["modelValue","rules"])]),_:1}),e(c,{cols:"12"},{default:l(()=>[e($,{type:"submit",class:"me-3"},{default:l(()=>[we]),_:1}),e($,{type:"reset",variant:"tonal",color:"secondary",onClick:T},{default:l(()=>[ye]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}};const Se=g(" Export "),ke={class:"app-user-search-filter d-flex align-center"},Ce=g(" Add User "),De={scope:"col"},Ne={class:"mb-n2",style:{width:"1.875rem"}},Pe=t("th",{scope:"col"}," USER ",-1),$e=t("th",{scope:"col"}," EMAIL ",-1),Ae=t("th",{scope:"col"}," ROLE ",-1),ze=t("th",{scope:"col"}," PLAN ",-1),Ee=t("th",{scope:"col"}," STATUS ",-1),Oe=t("th",{scope:"col"}," ACTIONS ",-1),Te={class:"mb-n2",style:{width:"1.875rem"}},Le={class:"d-flex align-center"},Re={key:1},Ie={class:"d-flex flex-column"},Be={class:"text-sm"},Fe={class:"text-xs text-medium-emphasis"},Me={class:"text-medium-emphasis"},je={class:"text-capitalize text-medium-emphasis"},qe={class:"text-capitalize"},Qe=g("View"),Ze=g("Edit"),Ge=g("Delete"),He=t("tr",null,[t("td",{colspan:"7",class:"text-center"}," No data available ")],-1),Je=[He],Ke={class:"d-flex align-center me-3",style:{width:"171px"}},We=t("span",{class:"text-no-wrap me-3"},"Rows per page:",-1),Xe={class:"d-flex align-center"},Ye={class:"text-sm font-weight-regular"},rl={__name:"index",setup(j){const U=he(),A=i(""),S=i(),p=i(),b=i(),_=i(10),d=i(1),f=i(1),k=i(0),v=i([]),C=()=>{U.fetchUsers({q:A.value,status:b.value,plan:p.value,role:S.value,perPage:_.value,currentPage:d.value}).then(o=>{v.value=o.data.users,f.value=o.data.totalPage,k.value=o.data.totalUsers}).catch(o=>{console.error(o)})};I(C),I(()=>{d.value>f.value&&(d.value=f.value)});const z=[{title:"Admin",value:"admin"},{title:"Author",value:"author"},{title:"Editor",value:"editor"},{title:"Maintainer",value:"maintainer"},{title:"Subscriber",value:"subscriber"}],E=[{title:"Basic",value:"basic"},{title:"Company",value:"company"},{title:"Enterprise",value:"enterprise"},{title:"Team",value:"team"}],T=[{title:"Pending",value:"pending"},{title:"Active",value:"active"},{title:"Inactive",value:"inactive"}],O=o=>o==="subscriber"?{color:"primary",icon:"mdi-account-outline"}:o==="author"?{color:"warning",icon:"mdi-cog-outline"}:o==="maintainer"?{color:"success",icon:"mdi-chart-donut"}:o==="editor"?{color:"info",icon:"mdi-pencil-outline"}:o==="admin"?{color:"error",icon:"mdi-laptop"}:{color:"primary",icon:"mdi-account-outline"},V=o=>o==="pending"?"warning":o==="active"?"success":o==="inactive"?"secondary":"primary",s=i(!1);I(()=>{d.value>f.value&&(d.value=f.value)});const n=ae(()=>{const o=v.value.length?(d.value-1)*_.value+1:0,u=v.value.length+(d.value-1)*_.value;return`${o}-${u} of ${k.value}`}),r=i([]),D=i(!1),K=()=>{D.value=!D.value,D.value?v.value.forEach(o=>{r.value.includes(`check${o.id}`)||r.value.push(`check${o.id}`)}):r.value=[]};te(r,()=>{r.value.length||(D.value=!1)},{deep:!0});const W=o=>{if(r.value.includes(o)){const u=r.value.indexOf(o);r.value.splice(u,1)}else r.value.push(o),D.value=!0},X=o=>{U.addUser(o),C()};return(o,u)=>{const Y=ie("RouterLink");return N(),L("section",null,[e(M,{title:"Filters",class:"mb-6"},{default:l(()=>[e(R,null,{default:l(()=>[e(J,null,{default:l(()=>[e(c,{cols:"12",sm:"4"},{default:l(()=>[e(y,{modelValue:S.value,"onUpdate:modelValue":u[0]||(u[0]=a=>S.value=a),label:"Select Role",items:z,clearable:"","clear-icon":"mdi-close"},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",sm:"4"},{default:l(()=>[e(y,{modelValue:p.value,"onUpdate:modelValue":u[1]||(u[1]=a=>p.value=a),label:"Select Plan",items:E,clearable:"","clear-icon":"mdi-close"},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",sm:"4"},{default:l(()=>[e(y,{modelValue:b.value,"onUpdate:modelValue":u[2]||(u[2]=a=>b.value=a),label:"Select Status",items:T,clearable:"","clear-icon":"mdi-close"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(M,null,{default:l(()=>[e(R,{class:"d-flex flex-wrap gap-4"},{default:l(()=>[e($,{variant:"tonal",color:"secondary","prepend-icon":"mdi-tray-arrow-up"},{default:l(()=>[Se]),_:1}),e(H),t("div",ke,[e(w,{modelValue:A.value,"onUpdate:modelValue":u[3]||(u[3]=a=>A.value=a),placeholder:"Search User",density:"compact",class:"me-3"},null,8,["modelValue"]),e($,{onClick:u[4]||(u[4]=a=>s.value=!0)},{default:l(()=>[Ce]),_:1})])]),_:1}),e(Q),e(ge,{class:"text-no-wrap"},{default:l(()=>[t("thead",null,[t("tr",null,[t("th",De,[t("div",Ne,[e(Z,{"model-value":D.value,indeterminate:v.value.length!==r.value.length&&!!r.value.length,onClick:K},null,8,["model-value","indeterminate"])])]),Pe,$e,Ae,ze,Ee,Oe])]),t("tbody",null,[(N(!0),L(se,null,oe(v.value,a=>(N(),L("tr",{key:a.id},[t("td",null,[t("div",Te,[e(Z,{id:`check${a.id}`,"model-value":r.value.includes(`check${a.id}`),onClick:el=>W(`check${a.id}`)},null,8,["id","model-value","onClick"])])]),t("td",null,[t("div",Le,[e(re,{variant:"tonal",color:O(a.role).color,class:"me-3",size:"34"},{default:l(()=>[a.avatar?(N(),G(de,{key:0,src:a.avatar},null,8,["src"])):(N(),L("span",Re,x(m(ce)(a.fullName)),1))]),_:2},1032,["color"]),t("div",Ie,[t("h6",Be,[e(Y,{to:{name:"user-view-id",params:{id:a.id}},class:"font-weight-medium",style:{color:"rgba(var(--v-theme-on-background), var(--v-high-emphasis-opacity))"}},{default:l(()=>[g(x(a.fullName),1)]),_:2},1032,["to"])]),t("span",Fe,"@"+x(a.username),1)])])]),t("td",Me,x(a.email),1),t("td",null,[e(P,{icon:O(a.role).icon,color:O(a.role).color,size:22,class:"me-3"},null,8,["icon","color"]),t("span",je,x(a.role),1)]),t("td",qe,x(a.currentPlan),1),t("td",null,[e(me,{color:V(a.status),size:"small",class:"text-capitalize"},{default:l(()=>[g(x(a.status),1)]),_:2},1032,["color"])]),t("td",null,[e($,{size:"x-small",color:"default",variant:"plain",icon:""},{default:l(()=>[e(P,{size:"24",icon:"mdi-dots-vertical"}),e(ve,{activator:"parent"},{default:l(()=>[e(pe,null,{default:l(()=>[e(B,{to:{name:"user-view-id",params:{id:a.id}}},{prepend:l(()=>[e(P,{icon:"mdi-eye-outline",size:20,class:"me-3"})]),default:l(()=>[e(F,null,{default:l(()=>[Qe]),_:1})]),_:2},1032,["to"]),e(B,{href:"javascript:void(0)"},{prepend:l(()=>[e(P,{icon:"mdi-pencil-outline",size:20,class:"me-3"})]),default:l(()=>[e(F,null,{default:l(()=>[Ze]),_:1})]),_:1}),e(B,{href:"javascript:void(0)"},{prepend:l(()=>[e(P,{icon:"mdi-delete-outline",size:20,class:"me-3"})]),default:l(()=>[e(F,null,{default:l(()=>[Ge]),_:1})]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1024)])]))),128))]),ne(t("tfoot",null,Je,512),[[ue,!v.value.length]])]),_:1}),e(Q),e(R,{class:"d-flex align-center flex-wrap justify-end gap-4 pa-2"},{default:l(()=>[t("div",Ke,[We,e(y,{modelValue:_.value,"onUpdate:modelValue":u[5]||(u[5]=a=>_.value=a),density:"compact",variant:"plain",class:"user-pagination-select",items:[10,20,30,50]},null,8,["modelValue"])]),t("div",Xe,[t("h6",Ye,x(m(n)),1),e(xe,{modelValue:d.value,"onUpdate:modelValue":u[6]||(u[6]=a=>d.value=a),size:"small","total-visible":1,length:f.value,onNext:u[7]||(u[7]=a=>r.value=[]),onPrev:u[8]||(u[8]=a=>r.value=[])},null,8,["modelValue","length"])])]),_:1})]),_:1}),e(Ue,{isDrawerOpen:s.value,"onUpdate:isDrawerOpen":u[9]||(u[9]=a=>s.value=a),onUserData:X},null,8,["isDrawerOpen"])])}}};export{rl as default};
