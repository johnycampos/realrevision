import{$ as d,cm as $,O as M,a0 as Q,o as f,ar as V,a as e,w as l,e as Z,V as T,ae as P,a5 as t,a7 as G,ad as H,aa as g,cV as A,a9 as u,at as J,au as K,P as W,a8 as X,a6 as i,ab as L,b as Y,f as _,r as ee,k as E,aF as N,c as te,S as ae,dL as le,cZ as se,dr as oe,dq as ne,dl as k,dn as D}from"./index.a1270b37.js";import{_ as ie}from"./AppDateTimePicker.8290a881.js";import{u as de}from"./useInvoiceStore.f9c2b408.js";import{b as S,V as B}from"./VCard.64685768.js";import{V as ce}from"./VTable.4626573f.js";import{V as R}from"./VCheckbox.f7e0499a.js";import{V as ue}from"./VPagination.f6eef3e1.js";import{V as re}from"./VTooltip.85e07579.js";import"./vue.runtime.esm-bundler.cc528c31.js";const me={key:0},ve={class:"me-3"},_e={class:"d-flex align-center flex-wrap gap-4"},pe={class:"invoice-list-search"},fe=_(" Create invoice "),he={scope:"col",class:"text-center"},xe={class:"mb-n2",style:{width:"1rem"}},Ve=t("th",{scope:"col"}," #ID ",-1),ge={scope:"col",class:"text-center"},we=t("th",{scope:"col"}," CLIENT ",-1),ye=t("th",{scope:"col",class:"text-center"}," TOTAL ",-1),be=t("th",{scope:"col"}," DATE ",-1),Pe=t("th",{scope:"col",class:"text-center"}," BALANCE ",-1),ke=t("th",{scope:"col"}," ACTIONS ",-1),De={class:"mb-n2",style:{width:"1rem"}},Se={class:"text-center"},Ie={class:"mb-0"},Ce={class:"mb-0"},ze={class:"mb-0"},$e={class:"d-flex align-center"},Te={key:1},Ae={class:"d-flex flex-column"},Le={class:"text-sm font-weight-medium mb-0"},Ee={class:"text-caption"},Ne={class:"text-center"},Be={class:"text-center"},Re=_("Download"),Ue=_("Edit"),Fe=_("Duplicate"),Oe=t("tr",null,[t("td",{colspan:"8",class:"text-center text-body-1"}," No data available ")],-1),qe=[Oe],je={class:"d-flex align-center me-3",style:{width:"171px"}},Me=t("span",{class:"text-no-wrap me-3"},"Rows per page:",-1),Qe={class:"d-flex align-center"},Ze={class:"text-sm font-weight-regular"},lt={__name:"index",setup(Ge){const U=de(),w=d(""),h=d(""),y=d(),p=d(10),r=d(1),x=d(1),I=d(0),c=d([]),n=d([]),v=d(!1);$(()=>{const[s,o]=h.value?h.value.split("to"):"";U.fetchInvoices({q:w.value,status:y.value,perPage:p.value,currentPage:r.value,startDate:s,endDate:o}).then(m=>{c.value=m.data.invoices,x.value=m.data.totalPage,I.value=m.data.totalInvoices}).catch(m=>{console.log(m)})}),$(()=>{r.value>x.value&&(r.value=x.value)});const F=M(()=>{const s=c.value.length?(r.value-1)*p.value+1:0,o=c.value.length+(r.value-1)*p.value;return`${s}-${o} of ${I.value}`}),C=(s,o)=>s===o?{status:"Unpaid",chip:{color:"error"}}:s===0?{status:"Paid",chip:{color:"success"}}:{status:s,chip:{variant:"text"}},b=s=>s==="Partial Payment"?{variant:"warning",icon:"mdi-chart-timeline-variant"}:s==="Paid"?{variant:"success",icon:"mdi-check"}:s==="Downloaded"?{variant:"info",icon:"mdi-arrow-down"}:s==="Draft"?{variant:"secondary",icon:"mdi-content-save-outline"}:s==="Sent"?{variant:"primary",icon:"mdi-email-outline"}:s==="Past Due"?{variant:"error",icon:"mdi-alert-circle-outline"}:{variant:"secondary",icon:"mdi-close"},O=()=>{v.value=!v.value,v.value?c.value.forEach(s=>{n.value.includes(`check${s.id}`)||n.value.push(`check${s.id}`)}):n.value=[]};Q(n,()=>{n.value.length||(v.value=!1)},{deep:!0});const q=s=>{if(n.value.includes(s)){const o=n.value.indexOf(s);n.value.splice(o,1)}else n.value.push(s),v.value=!0};return(s,o)=>{const m=ie,j=ee("RouterLink");return c.value?(f(),V("section",me,[e(B,{title:"Filters",class:"mb-6"},{default:l(()=>[e(S,null,{default:l(()=>[e(Z,null,{default:l(()=>[e(T,{cols:"12",md:"6"},{default:l(()=>[e(P,{modelValue:y.value,"onUpdate:modelValue":o[0]||(o[0]=a=>y.value=a),label:"Select Status",clearable:"","clear-icon":"mdi-close",items:["Downloaded","Draft","Sent","Paid","Partial Payment","Past Due"]},null,8,["modelValue"])]),_:1}),e(T,{cols:"12",md:"6"},{default:l(()=>[e(m,{modelValue:h.value,"onUpdate:modelValue":o[1]||(o[1]=a=>h.value=a),label:"Invoice Date","clear-icon":"mdi-close",clearable:"",config:{mode:"range"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(B,{id:"invoice-list"},{default:l(()=>[e(S,{class:"d-flex align-center flex-wrap gap-4"},{default:l(()=>[t("div",ve,[e(P,{density:"compact",label:"Actions",items:["Delete","Edit","Send"],class:"invoice-list-actions",disabled:!n.value.length},null,8,["disabled"])]),e(G),t("div",_e,[t("div",pe,[e(H,{modelValue:w.value,"onUpdate:modelValue":o[2]||(o[2]=a=>w.value=a),placeholder:"Search Invoice",density:"compact",class:"me-3"},null,8,["modelValue"])]),e(g,{"prepend-icon":"mdi-plus",to:{name:"invoice-add"}},{default:l(()=>[fe]),_:1})])]),_:1}),e(A),e(ce,{class:"text-no-wrap invoice-list-table"},{default:l(()=>[t("thead",null,[t("tr",null,[t("th",he,[t("div",xe,[e(R,{"model-value":v.value,indeterminate:c.value.length!==n.value.length&&!!n.value.length,onClick:O},null,8,["model-value","indeterminate"])])]),Ve,t("th",ge,[e(u,{icon:"mdi-trending-up"})]),we,ye,be,Pe,ke])]),t("tbody",null,[(f(!0),V(J,null,K(c.value,a=>(f(),V("tr",{key:a.id},[t("td",null,[t("div",De,[e(R,{id:`check${a.id}`,"model-value":n.value.includes(`check${a.id}`),onClick:z=>q(`check${a.id}`)},null,8,["id","model-value","onClick"])])]),t("td",null,[e(j,{to:{name:"invoice-preview-id",params:{id:a.id}}},{default:l(()=>[_(" #"+i(a.id),1)]),_:2},1032,["to"])]),t("td",Se,[e(re,null,{activator:l(({props:z})=>[e(E,N({size:34},z,{color:b(a.invoiceStatus).variant,variant:"tonal"}),{default:l(()=>[e(u,{size:20,icon:b(a.invoiceStatus).icon},null,8,["icon"])]),_:2},1040,["color"])]),default:l(()=>[t("p",Ie,i(a.invoiceStatus),1),t("p",Ce," Balance: "+i(a.balance),1),t("p",ze," Due date: "+i(a.dueDate),1)]),_:2},1024)]),t("td",null,[t("div",$e,[e(E,{size:"34",color:b(a.invoiceStatus).variant,variant:"tonal",class:"me-3"},{default:l(()=>[a.avatar.length?(f(),te(ae,{key:0,src:a.avatar},null,8,["src"])):(f(),V("span",Te,i(L(le)(a.client.name)),1))]),_:2},1032,["color"]),t("div",Ae,[t("h6",Le,i(a.client.name),1),t("span",Ee,i(a.client.companyEmail),1)])])]),t("td",Ne," $"+i(a.total),1),t("td",null,i(a.issuedDate),1),t("td",Be,[e(se,N(C(a.balance,a.total).chip,{size:"small"}),{default:l(()=>[_(i(C(a.balance,a.total).status),1)]),_:2},1040)]),t("td",null,[e(g,{icon:"",variant:"plain",color:"default",size:"x-small"},{default:l(()=>[e(u,{icon:"mdi-delete-outline",size:24})]),_:1}),e(g,{icon:"",variant:"plain",color:"default",size:"x-small",to:{name:"invoice-preview-id",params:{id:a.id}}},{default:l(()=>[e(u,{size:24,icon:"mdi-eye-outline"})]),_:2},1032,["to"]),e(g,{icon:"",variant:"plain",color:"default",size:"x-small"},{default:l(()=>[e(u,{size:24,icon:"mdi-dots-vertical"}),e(oe,{activator:"parent"},{default:l(()=>[e(ne,null,{default:l(()=>[e(k,{value:"download"},{prepend:l(()=>[e(u,{size:"24",class:"me-3",icon:"mdi-download-outline"})]),default:l(()=>[e(D,null,{default:l(()=>[Re]),_:1})]),_:1}),e(k,{to:{name:"invoice-edit-id",params:{id:a.id}}},{prepend:l(()=>[e(u,{size:"24",class:"me-3",icon:"mdi-pencil-outline"})]),default:l(()=>[e(D,null,{default:l(()=>[Ue]),_:1})]),_:2},1032,["to"]),e(k,{value:"duplicate"},{prepend:l(()=>[e(u,{size:"24",class:"me-3",icon:"mdi-layers-outline"})]),default:l(()=>[e(D,null,{default:l(()=>[Fe]),_:1})]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1024)])]))),128))]),W(t("tfoot",null,qe,512),[[X,!c.value.length]])]),_:1}),e(A),e(S,{class:"d-flex flex-wrap justify-end gap-4 pa-2"},{default:l(()=>[t("div",je,[Me,e(P,{modelValue:p.value,"onUpdate:modelValue":o[3]||(o[3]=a=>p.value=a),density:"compact",variant:"plain",class:"invoice-pagination-select",items:[10,20,30,50]},null,8,["modelValue"])]),t("div",Qe,[t("h6",Ze,i(L(F)),1),e(ue,{modelValue:r.value,"onUpdate:modelValue":o[4]||(o[4]=a=>r.value=a),size:"small","total-visible":1,length:x.value,onNext:o[5]||(o[5]=a=>n.value=[]),onPrev:o[6]||(o[6]=a=>n.value=[])},null,8,["modelValue","length"])])]),_:1})]),_:1})])):Y("",!0)}}};export{lt as default};
